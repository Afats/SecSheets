
# Switches
from re import S
import sys

# pwn
from pwn import *


# ::::::::::::::::::::::::: CONFIG :::::::::::::::::::::::::
PATH = 'Chals'
BINARY = '<challenge>'
HOST = '<ip/domain>:<port>'
# :::::::::::::::::::::::::::::::::::::::::::::::::::::::::

def pwn(switch):
    
    if (switch == '-r'):
        host = HOST.split(':')
        proc = remote(host[0], int(host[1]))

    elif (switch == '-ld'):
        binary = f'./{PATH}/{BINARY}'
        proc = process(binary)
        gdb.attach(proc)
        # pause()
    else:
        binary = f'./{PATH}/{BINARY}'
        proc = process(binary)

    ## get da banner
    print(proc.recvline())



if __name__ == "__main__":

    if (len(sys.argv) < 2 or len(sys.argv) > 2):
        print(f'''

        
  __                        
  \ \   _ ____      ___ __  
   \ \ | '_ \ \ /\ / / '_ \ 
   / / | |_) \ V  V /| | | |
  /_/  | .__/ \_/\_/ |_| |_|
       |_|                  

        usage :: python3 {sys.argv[0]} [options]

        :::::::::::::::::: [options] ::::::::::::::::::

        -l, --local         run against local binary
        -ld, --local-debug  run debugger with binary
        -r, --remote        run against remote binary 

        ''')
        exit(0)
    else:
        pwn(sys.argv[1])

